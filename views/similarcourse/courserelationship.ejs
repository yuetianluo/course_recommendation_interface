
<% if (messages && messages['error'].length > 0) { %>
  <div class="alert alert-danger" >
  <% messages['error'].forEach(function(message) { %>
    <%= message %>
    <br>
  <% }); %>
  </div>
  <br>
<% } %>
<% if (messages && messages['warning'].length > 0) { %>
  <div class="alert alert-warning">
  <% messages['warning'].forEach(function(message) { %>
    <%= message %>
    <br>
  <% }); %>
  </div>
  <br>
<% } %>
<% if (messages && messages['success'].length > 0) { %>
  <div class="alert alert-success">
  <% messages['success'].forEach(function(message) { %>
    <%= message %>
    <br>
  <% }); %>
  </div>
  <br>
<% } %> 
     


<div class="mini-banner auto">
	<div class="container">
		<h2>Investigate course relationship</h2>
	</div>
</div>

<div class="sub-banner">
  <div class="container">
    <h2>Investigate interesting course relationships here! </h2>
    <h4>
      You can choose up to three positive courses, "posi_course1","posi_course2","posi_course3" and you can choose up to three nagetive courses, "nega_course1","nega_course2","nega_course3", we will help you to find the most similar courses after doing a simple arithmatic calculation: posi_course1+posi_course2+posi_course3-nega_course1-nega_course2-nega_course3
    </h4>
  </div>
</div>

<div class="container wrapper">
<!--**************************positive course1******************************-->
<div class="row">
<h3>Please choose up to three positive courses</h3>
  <form method="POST" action="/similarcourse/courserelationship" id="courseform" > 
	<div class="col-md-3">
    <select name="departmentid" class="department-list form-control" id="departmentlist" tabindex="1">
    <option></option>
      <% _.each(departments, function(department) { %>
      <option value="<%=department.id%>"><%=department.departmentName%></option>
      <%})%>
    </select>
    
    <select name="departmentid" class="department-list form-control hidden" id="departmentlist2" style="width:200px" tabindex="1">
    <option></option>
      <% _.each(departments, function(department) { %>
      <option value="<%=department.id%>"><%=department.departmentName%></option>
      <%})%>
    </select>
	</div>

	<div class="col-md-3">
    <select class="coursesubject-list form-control" id="coursesubjectlist" name="coursesubjectName"  tabindex="1">
    <option></option>
      <% _.each(coursesubjects, function(coursesubject) { %>
      <option value="<%=coursesubject.departmentid.id%>" id="<%=coursesubject.id%>"><%=coursesubject.coursesubjectName%></option>
      <%})%>  
    </select>

    <select class="coursesubject-list form-control hidden" id="coursesubjectlist2" name="coursesubjectName" style="width:200px" tabindex="1">
    <option></option><!--hidden select bar, so that you can choose it again-->
      <% _.each(coursesubjects, function(coursesubject) { %>
      <option value="<%=coursesubject.departmentid.id%>" id="<%=coursesubject.id%>"><%=coursesubject.coursesubjectName%></option>
      <%})%> 
    </select> 
  </div>

  <div class="col-md-3">
		<select class="course-list form-control" id="courselist" name="courseName"  tabindex="1">
		<option></option>
		</select>
    <select class="course-list form-control hidden" id="courselist2" name="courseName" style="width:200px" tabindex="1">
    <option></option><!--hidden select bar, so that you can choose it again-->
    </select>  
	</div>
  </form>
  </div>

  <br>
<!--***********************************positive course2****************************************-->
  <div class="row">
  <div class="col-md-3">
    <select name="departmentid" class="department-list form-control" id="departmentlist_2" tabindex="1">
    <option></option>
      <% _.each(departments, function(department) { %>
      <option value="<%=department.id%>"><%=department.departmentName%></option>
      <%})%>
    </select>
    
    <select name="departmentid" class="department-list form-control hidden" id="departmentlist2_2" style="width:200px" tabindex="1">
    <option></option>
      <% _.each(departments, function(department) { %>
      <option value="<%=department.id%>"><%=department.departmentName%></option>
      <%})%>
    </select>
  </div>

  <div class="col-md-3">
    <select class="coursesubject-list form-control" id="coursesubjectlist_2" name="coursesubjectName"  tabindex="1">
    <option></option>
      <% _.each(coursesubjects, function(coursesubject) { %>
      <option value="<%=coursesubject.departmentid.id%>" id="<%=coursesubject.id%>"><%=coursesubject.coursesubjectName%></option>
      <%})%>  
    </select>

    <select class="coursesubject-list form-control hidden" id="coursesubjectlist2_2" name="coursesubjectName" style="width:200px" tabindex="1">
    <option></option><!--hidden select bar, so that you can choose it again-->
      <% _.each(coursesubjects, function(coursesubject) { %>
      <option value="<%=coursesubject.departmentid.id%>" id="<%=coursesubject.id%>"><%=coursesubject.coursesubjectName%></option>
      <%})%> 
    </select> 
  </div>

  <div class="col-md-3">
    <select class="course-list form-control" id="courselist_2" name="courseName"  tabindex="1">
    <option></option>
    </select>
    <select class="course-list form-control hidden" id="courselist2_2" name="courseName" style="width:200px" tabindex="1">
    <option></option><!--hidden select bar, so that you can choose it again-->
    </select>  
  </div>
  </div>

  <br>
<!--***********************************positive course3******************************************-->  
  <div class="row">
  <div class="col-md-3">
    <select name="departmentid" class="department-list form-control" id="departmentlist_3" tabindex="1">
    <option></option>
      <% _.each(departments, function(department) { %>
      <option value="<%=department.id%>"><%=department.departmentName%></option>
      <%})%>
    </select>
    
    <select name="departmentid" class="department-list form-control hidden" id="departmentlist2_3" style="width:200px" tabindex="1">
    <option></option>
      <% _.each(departments, function(department) { %>
      <option value="<%=department.id%>"><%=department.departmentName%></option>
      <%})%>
    </select>
  </div>

  <div class="col-md-3">
    <select class="coursesubject-list form-control" id="coursesubjectlist_3" name="coursesubjectName"  tabindex="1">
    <option></option>
      <% _.each(coursesubjects, function(coursesubject) { %>
      <option value="<%=coursesubject.departmentid.id%>" id="<%=coursesubject.id%>"><%=coursesubject.coursesubjectName%></option>
      <%})%>  
    </select>

    <select class="coursesubject-list form-control hidden" id="coursesubjectlist2_3" name="coursesubjectName" style="width:200px" tabindex="1">
    <option></option><!--hidden select bar, so that you can choose it again-->
      <% _.each(coursesubjects, function(coursesubject) { %>
      <option value="<%=coursesubject.departmentid.id%>" id="<%=coursesubject.id%>"><%=coursesubject.coursesubjectName%></option>
      <%})%> 
    </select> 
  </div>

  <div class="col-md-3">
    <select class="course-list form-control" id="courselist_3" name="courseName"  tabindex="1">
    <option></option>
    </select>
    <select class="course-list form-control hidden" id="courselist2_3" name="courseName" style="width:200px" tabindex="1">
    <option></option><!--hidden select bar, so that you can choose it again-->
    </select>  
  </div>
  </div>
  <br>
<!--***********************************Negative course1*****************************************-->
  <div class="row">
<h3>Please choose up to three negative courses</h3>
  <div class="col-md-3">
    <select name="departmentid" class="department-list form-control" id="departmentlist_4" tabindex="1">
    <option></option>
      <% _.each(departments, function(department) { %>
      <option value="<%=department.id%>"><%=department.departmentName%></option>
      <%})%>
    </select>
    
    <select name="departmentid" class="department-list form-control hidden" id="departmentlist2_4" style="width:200px" tabindex="1">
    <option></option>
      <% _.each(departments, function(department) { %>
      <option value="<%=department.id%>"><%=department.departmentName%></option>
      <%})%>
    </select>
  </div>

  <div class="col-md-3">
    <select class="coursesubject-list form-control" id="coursesubjectlist_4" name="coursesubjectName"  tabindex="1">
    <option></option>
      <% _.each(coursesubjects, function(coursesubject) { %>
      <option value="<%=coursesubject.departmentid.id%>" id="<%=coursesubject.id%>"><%=coursesubject.coursesubjectName%></option>
      <%})%>  
    </select>

    <select class="coursesubject-list form-control hidden" id="coursesubjectlist2_4" name="coursesubjectName" style="width:200px" tabindex="1">
    <option></option><!--hidden select bar, so that you can choose it again-->
      <% _.each(coursesubjects, function(coursesubject) { %>
      <option value="<%=coursesubject.departmentid.id%>" id="<%=coursesubject.id%>"><%=coursesubject.coursesubjectName%></option>
      <%})%> 
    </select> 
  </div>

  <div class="col-md-3">
    <select class="course-list form-control" id="courselist_4" name="courseName"  tabindex="1">
    <option></option>
    </select>
    <select class="course-list form-control hidden" id="courselist2_4" name="courseName" style="width:200px" tabindex="1">
    <option></option><!--hidden select bar, so that you can choose it again-->
    </select>  
  </div>
  </div>
  <br>
<!--*************************************Negative course2 **********************************************-->
  <div class="row">
  <div class="col-md-3">
    <select name="departmentid" class="department-list form-control" id="departmentlist_5" tabindex="1">
    <option></option>
      <% _.each(departments, function(department) { %>
      <option value="<%=department.id%>"><%=department.departmentName%></option>
      <%})%>
    </select>
    
    <select name="departmentid" class="department-list form-control hidden" id="departmentlist2_5" style="width:200px" tabindex="1">
    <option></option>
      <% _.each(departments, function(department) { %>
      <option value="<%=department.id%>"><%=department.departmentName%></option>
      <%})%>
    </select>
  </div>

  <div class="col-md-3">
    <select class="coursesubject-list form-control" id="coursesubjectlist_5" name="coursesubjectName"  tabindex="1">
    <option></option>
      <% _.each(coursesubjects, function(coursesubject) { %>
      <option value="<%=coursesubject.departmentid.id%>" id="<%=coursesubject.id%>"><%=coursesubject.coursesubjectName%></option>
      <%})%>  
    </select>

    <select class="coursesubject-list form-control hidden" id="coursesubjectlist2_5" name="coursesubjectName" style="width:200px" tabindex="1">
    <option></option><!--hidden select bar, so that you can choose it again-->
      <% _.each(coursesubjects, function(coursesubject) { %>
      <option value="<%=coursesubject.departmentid.id%>" id="<%=coursesubject.id%>"><%=coursesubject.coursesubjectName%></option>
      <%})%> 
    </select> 
  </div>

  <div class="col-md-3">
    <select class="course-list form-control" id="courselist_5" name="courseName"  tabindex="1">
    <option></option>
    </select>
    <select class="course-list form-control hidden" id="courselist2_5" name="courseName" style="width:200px" tabindex="1">
    <option></option><!--hidden select bar, so that you can choose it again-->
    </select>  
  </div>
  </div>
  <br>
<!--************************************negative course3**********************************************-->
  <div class="row">
  <div class="col-md-3">
    <select name="departmentid" class="department-list form-control" id="departmentlist_6" tabindex="1">
    <option></option>
      <% _.each(departments, function(department) { %>
      <option value="<%=department.id%>"><%=department.departmentName%></option>
      <%})%>
    </select>
    
    <select name="departmentid" class="department-list form-control hidden" id="departmentlist2_6" style="width:200px" tabindex="1">
    <option></option>
      <% _.each(departments, function(department) { %>
      <option value="<%=department.id%>"><%=department.departmentName%></option>
      <%})%>
    </select>
  </div>

  <div class="col-md-3">
    <select class="coursesubject-list form-control" id="coursesubjectlist_6" name="coursesubjectName"  tabindex="1">
    <option></option>
      <% _.each(coursesubjects, function(coursesubject) { %>
      <option value="<%=coursesubject.departmentid.id%>" id="<%=coursesubject.id%>"><%=coursesubject.coursesubjectName%></option>
      <%})%>  
    </select>

    <select class="coursesubject-list form-control hidden" id="coursesubjectlist2_6" name="coursesubjectName" style="width:200px" tabindex="1">
    <option></option><!--hidden select bar, so that you can choose it again-->
      <% _.each(coursesubjects, function(coursesubject) { %>
      <option value="<%=coursesubject.departmentid.id%>" id="<%=coursesubject.id%>"><%=coursesubject.coursesubjectName%></option>
      <%})%> 
    </select> 
  </div>

  <div class="col-md-3">
    <select class="course-list form-control" id="courselist_6" name="courseName"  tabindex="1">
    <option></option>
    </select>
    <select class="course-list form-control hidden" id="courselist2_6" name="courseName" style="width:200px" tabindex="1">
    <option></option><!--hidden select bar, so that you can choose it again-->
    </select>  
  </div>
    <div class="pull-right">
    <input type="button" value="Submit", id="coursesubmit" style="width:100px;background-color: #4CAF50;color:white" onclick="this.style.color='#000000'; this.style.backgroundColor = '#ffffff'" tabindex="1">
      <input type="hidden" name="_csrf" value="<%= _csrf %>" />
    </div>
  </div>

  <br>

  <div id=addtable>
  <!--ajax add table-->
  </div>

</div>

<!--********************************positive_course1 start here*****************************************-->

<script type="text/javascript">
  $(document).ready(function(){
    $("#coursesubmit").on('keypress click',function(event){
      var pos1_courseid=$("#courselist").val();
      var pos2_courseid=$("#courselist_2").val();
      var pos3_courseid=$("#courselist_3").val();
      var neg1_courseid=$("#courselist_4").val();
      var neg2_courseid=$("#courselist_5").val();
      var neg3_courseid=$("#courselist_6").val();
      $.ajax({
        url:'/similarcourse/course_rela_analysis',
        type:'POST',
        data:{
          pos1_courseid:pos1_courseid,  //be careful there is no punctuation
          pos2_courseid:pos2_courseid,
          pos3_courseid:pos3_courseid,
          neg1_courseid:neg1_courseid,
          neg2_courseid:neg2_courseid,
          neg3_courseid:neg3_courseid
        },
        success:function(response){
          $('#course-table').remove();
          $('#title').remove();
          //console.log(response);//you can use this method to see data you pass to browser
          var trHTML = "<h3 id='title'>Top 10 similar courses</h3><table class='table table-striped table-hover' id='course-table'><thead><tr><th>Course ID</th><th>Course Name</th><th>Course Subject</th><th>Department </th><th>Cosine Similarity</th></tr></thead><tbody>";
          $.each(response, function (i, item) {
            trHTML += '<tr><td>' + item.id + '</td><td>' + item.courseName+'</td><td>' + item.coursesubjectid.coursesubjectName+'</td><td>' + item.departmentid.departmentName + '</td><td>'+item.cosinesimilarity+'</td></tr>';
          });
          trHTML +="</tbody></table>"
          $('#addtable').append(trHTML);
        },
        failure:function(msg){
          $('#addtable').append('<div class="alert alert-danger" id="courseerror"><h3>'+msg+'</h3></div>')
        },
        error:function(jqXHR, textStatus,errorMessage){
        $('#course-table').remove();
        $('#addtable').append('<div class="alert alert-danger" id="course-table"><h3>Sorry, there is not sufficient records on this course, so we can not recommend you similar courses with strong confidence</h3></div>')
        }
      })
    });
  });
</script>


<script type="text/javascript">
  $(document).ready(function() {
  $("#courselist").select2({
    placeholder:'Please choose a course'
  }).on("select2:close",function(){
    $('#courselist').focus();
  })
});
</script> 


 <script type="text/javascript">
  $(document).ready(function() {
  $("#coursesubjectlist")
   .select2({
    placeholder:'Please choose a subject'
  }).on("change",function(){
      var coursesubjectid = $(this).children(":selected").attr("id");
      console.log(coursesubjectid);
      $.ajax({
      url:'/similarcourse/filterbycoursesubject',
      type:'POST',
      data:{
          coursesubjectid:coursesubjectid  //be careful there is no punctuation
        },
      success:function(response){
          $('#courselist').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
          $('#courselist2').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist2').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
      }
    });
      $(this).data('options', $('#departmentlist2 option').clone());
      var id = $(this).val()
      var options = $(this).data('options').filter('[value=' + id + ']');
      $('#departmentlist').html(options);
      var options = $(this).data('options');
      $('#departmentlist').append(options);
      $('#coursesubjectlist').focus();
  })
  .on("select2:close",function(){
    $('#coursesubjectlist').focus();
  })
});
</script>  


 <script type="text/javascript">
  $(document).ready(function() {
  $("#departmentlist")
   .select2({
    placeholder:'Please choose a department'
  }).on("change",function() {//this is a way to add "change" event

    $(this).data('options', $('#coursesubjectlist2 option').clone());
    var id = $(this).val();
    var options = $(this).data('options').filter('[value=' + id + ']');
    $('#coursesubjectlist').empty().append($('<option>'))
    $('#coursesubjectlist').append(options);//if you don't want to show your first choice, you can't use .html(),just append
    var departmentid=$("#departmentlist").val();
    $.ajax({
      url:'/similarcourse/filterbydepartment',
      type:'POST',
      data:{
          departmentid:departmentid  //be careful there is no punctuation
        },
      success:function(response){
          $('#courselist').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
          $('#courselist2').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist2').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
      }
    });
    // });
    // $(this).data('options', $('#courselist2 option').clone());
    //  var id = $(this).val();
    //  var options = $(this).data('options').filter('[id=' + id + ']');
    // $('#courselist').append(options);
    $('#departmentlist').focus();
    })//you can not add ';' here!!!
    .on("select2:close",function(){
    $(this).data('options', $('#departmentlist2 option').clone());
    var options = $(this).data('options')
     $('#departmentlist').append(options);
     $('#departmentlist').focus();
    });
  });
</script>    

<!--************************************Positive course2 start here*********************************************-->
<script type="text/javascript">
  $(document).ready(function() {
  $("#courselist_2").select2({
    placeholder:'Please choose a course'
  }).on("select2:close",function(){
    $('#courselist_2').focus();
  })
});
</script> 


 <script type="text/javascript">
  $(document).ready(function() {
  $("#coursesubjectlist_2")
   .select2({
    placeholder:'Please choose a subject'
  }).on("change",function(){
      var coursesubjectid = $(this).children(":selected").attr("id");
      console.log(coursesubjectid);
      $.ajax({
      url:'/similarcourse/filterbycoursesubject',
      type:'POST',
      data:{
          coursesubjectid:coursesubjectid  //be careful there is no punctuation
        },
      success:function(response){
          $('#courselist_2').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist_2').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
          $('#courselist2_2').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist2_2').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
      }
    });
      $(this).data('options', $('#departmentlist2_2 option').clone());
      var id = $(this).val()
      var options = $(this).data('options').filter('[value=' + id + ']');
      $('#departmentlist_2').html(options);
      var options = $(this).data('options');
      $('#departmentlist_2').append(options);
      $('#coursesubjectlist_2').focus();
  })
  .on("select2:close",function(){
    $('#coursesubjectlist_2').focus();
  })
});
</script>  


 <script type="text/javascript">
  $(document).ready(function() {
  $("#departmentlist_2")
   .select2({
    placeholder:'Please choose a department'
  }).on("change",function() {//this is a way to add "change" event

    $(this).data('options', $('#coursesubjectlist2_2 option').clone());
    var id = $(this).val();
    var options = $(this).data('options').filter('[value=' + id + ']');
    $('#coursesubjectlist_2').empty().append($('<option>'))
    $('#coursesubjectlist_2').append(options);//if you don't want to show your first choice, you can't use .html(),just append
    var departmentid=$("#departmentlist_2").val();
    $.ajax({
      url:'/similarcourse/filterbydepartment',
      type:'POST',
      data:{
          departmentid:departmentid  //be careful there is no punctuation
        },
      success:function(response){
          $('#courselist_2').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist_2').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
          $('#courselist2_2').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist2_2').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
      }
    });
    // });
    // $(this).data('options', $('#courselist2_2 option').clone());
    //  var id = $(this).val();
    //  var options = $(this).data('options').filter('[id=' + id + ']');
    // $('#courselist').append(options);
    $('#departmentlist_2').focus();
    })//you can not add ';' here!!!
    .on("select2:close",function(){
    $(this).data('options', $('#departmentlist2_2 option').clone());
    var options = $(this).data('options')
     $('#departmentlist_2').append(options);
     $('#departmentlist_2').focus();
    });
  });
</script>    

<!--*************************************positive course3 start here**********************************************-->

<script type="text/javascript">
  $(document).ready(function() {
  $("#courselist_3").select2({
    placeholder:'Please choose a course'
  }).on("select2:close",function(){
    $('#courselist_3').focus();
  })
});
</script> 


 <script type="text/javascript">
  $(document).ready(function() {
  $("#coursesubjectlist_3")
   .select2({
    placeholder:'Please choose a subject'
  }).on("change",function(){
      var coursesubjectid = $(this).children(":selected").attr("id");
      console.log(coursesubjectid);
      $.ajax({
      url:'/similarcourse/filterbycoursesubject',
      type:'POST',
      data:{
          coursesubjectid:coursesubjectid  //be careful there is no punctuation
        },
      success:function(response){
          $('#courselist_3').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist_3').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
          $('#courselist2_3').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist2_3').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
      }
    });
      $(this).data('options', $('#departmentlist2_3 option').clone());
      var id = $(this).val()
      var options = $(this).data('options').filter('[value=' + id + ']');
      $('#departmentlist_3').html(options);
      var options = $(this).data('options');
      $('#departmentlist_3').append(options);
      $('#coursesubjectlist_3').focus();
  })
  .on("select2:close",function(){
    $('#coursesubjectlist_3').focus();
  })
});
</script>  


 <script type="text/javascript">
  $(document).ready(function() {
  $("#departmentlist_3")
   .select2({
    placeholder:'Please choose a department'
  }).on("change",function() {//this is a way to add "change" event

    $(this).data('options', $('#coursesubjectlist2_3 option').clone());
    var id = $(this).val();
    var options = $(this).data('options').filter('[value=' + id + ']');
    $('#coursesubjectlist_3').empty().append($('<option>'))
    $('#coursesubjectlist_3').append(options);//if you don't want to show your first choice, you can't use .html(),just append
    var departmentid=$("#departmentlist_3").val();
    $.ajax({
      url:'/similarcourse/filterbydepartment',
      type:'POST',
      data:{
          departmentid:departmentid  //be careful there is no punctuation
        },
      success:function(response){
          $('#courselist_3').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist_3').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
          $('#courselist2_3').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist2_3').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
      }
    });
    // });
    // $(this).data('options', $('#courselist_32 option').clone());
    //  var id = $(this).val();
    //  var options = $(this).data('options').filter('[id=' + id + ']');
    // $('#courselist_3').append(options);
    $('#departmentlist_3').focus();
    })//you can not add ';' here!!!
    .on("select2:close",function(){
    $(this).data('options', $('#departmentlist2_3 option').clone());
    var options = $(this).data('options')
     $('#departmentlist_3').append(options);
     $('#departmentlist_3').focus();
    });
  });
</script>    

<!--*****************************************Negative course1 start here******************************************-->

<script type="text/javascript">
  $(document).ready(function() {
  $("#courselist_4").select2({
    placeholder:'Please choose a course'
  }).on("select2:close",function(){
    $('#courselist_4').focus();
  })
});
</script> 


 <script type="text/javascript">
  $(document).ready(function() {
  $("#coursesubjectlist_4")
   .select2({
    placeholder:'Please choose a subject'
  }).on("change",function(){
      var coursesubjectid = $(this).children(":selected").attr("id");
      console.log(coursesubjectid);
      $.ajax({
      url:'/similarcourse/filterbycoursesubject',
      type:'POST',
      data:{
          coursesubjectid:coursesubjectid  //be careful there is no punctuation
        },
      success:function(response){
          $('#courselist_4').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist_4').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
          $('#courselist2_4').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist2_4').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
      }
    });
      $(this).data('options', $('#departmentlist2_4 option').clone());
      var id = $(this).val()
      var options = $(this).data('options').filter('[value=' + id + ']');
      $('#departmentlist_4').html(options);
      var options = $(this).data('options');
      $('#departmentlist_4').append(options);
      $('#coursesubjectlist_4').focus();
  })
  .on("select2:close",function(){
    $('#coursesubjectlist_4').focus();
  })
});
</script>  


 <script type="text/javascript">
  $(document).ready(function() {
  $("#departmentlist_4")
   .select2({
    placeholder:'Please choose a department'
  }).on("change",function() {//this is a way to add "change" event

    $(this).data('options', $('#coursesubjectlist2_4 option').clone());
    var id = $(this).val();
    var options = $(this).data('options').filter('[value=' + id + ']');
    $('#coursesubjectlist_4').empty().append($('<option>'))
    $('#coursesubjectlist_4').append(options);//if you don't want to show your first choice, you can't use .html(),just append
    var departmentid=$("#departmentlist_4").val();
    $.ajax({
      url:'/similarcourse/filterbydepartment',
      type:'POST',
      data:{
          departmentid:departmentid  //be careful there is no punctuation
        },
      success:function(response){
          $('#courselist_4').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist_4').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
          $('#courselist2_4').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist2_4').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
      }
    });
    // });
    // $(this).data('options', $('#courselist_32 option').clone());
    //  var id = $(this).val();
    //  var options = $(this).data('options').filter('[id=' + id + ']');
    // $('#courselist_3').append(options);
    $('#departmentlist_4').focus();
    })//you can not add ';' here!!!
    .on("select2:close",function(){
    $(this).data('options', $('#departmentlist2_4 option').clone());
    var options = $(this).data('options')
     $('#departmentlist_4').append(options);
     $('#departmentlist_4').focus();
    });
  });
</script>    
<!--***************************************negative course2 start here*********************************************-->

<script type="text/javascript">
  $(document).ready(function() {
  $("#courselist_5").select2({
    placeholder:'Please choose a course'
  }).on("select2:close",function(){
    $('#courselist_5').focus();
  })
});
</script> 


 <script type="text/javascript">
  $(document).ready(function() {
  $("#coursesubjectlist_5")
   .select2({
    placeholder:'Please choose a subject'
  }).on("change",function(){
      var coursesubjectid = $(this).children(":selected").attr("id");
      console.log(coursesubjectid);
      $.ajax({
      url:'/similarcourse/filterbycoursesubject',
      type:'POST',
      data:{
          coursesubjectid:coursesubjectid  //be careful there is no punctuation
        },
      success:function(response){
          $('#courselist_5').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist_5').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
          $('#courselist2_5').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist2_5').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
      }
    });
      $(this).data('options', $('#departmentlist2_5 option').clone());
      var id = $(this).val()
      var options = $(this).data('options').filter('[value=' + id + ']');
      $('#departmentlist_5').html(options);
      var options = $(this).data('options');
      $('#departmentlist_5').append(options);
      $('#coursesubjectlist_5').focus();
  })
  .on("select2:close",function(){
    $('#coursesubjectlist_5').focus();
  })
});
</script>  


 <script type="text/javascript">
  $(document).ready(function() {
  $("#departmentlist_5")
   .select2({
    placeholder:'Please choose a department'
  }).on("change",function() {//this is a way to add "change" event

    $(this).data('options', $('#coursesubjectlist2_5 option').clone());
    var id = $(this).val();
    var options = $(this).data('options').filter('[value=' + id + ']');
    $('#coursesubjectlist_5').empty().append($('<option>'))
    $('#coursesubjectlist_5').append(options);//if you don't want to show your first choice, you can't use .html(),just append
    var departmentid=$("#departmentlist_5").val();
    $.ajax({
      url:'/similarcourse/filterbydepartment',
      type:'POST',
      data:{
          departmentid:departmentid  //be careful there is no punctuation
        },
      success:function(response){
          $('#courselist_5').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist_5').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
          $('#courselist2_5').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist2_5').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
      }
    });
    // });
    // $(this).data('options', $('#courselist_52 option').clone());
    //  var id = $(this).val();
    //  var options = $(this).data('options').filter('[id=' + id + ']');
    // $('#courselist_5').append(options);
    $('#departmentlist_5').focus();
    })//you can not add ';' here!!!
    .on("select2:close",function(){
    $(this).data('options', $('#departmentlist2_5 option').clone());
    var options = $(this).data('options')
     $('#departmentlist_5').append(options);
     $('#departmentlist_5').focus();
    });
  });
</script>    

<!--*****************************************Negative course3 start here************************************-->

<script type="text/javascript">
  $(document).ready(function() {
  $("#courselist_6").select2({
    placeholder:'Please choose a course'
  }).on("select2:close",function(){
    $('#courselist_6').focus();
  })
});
</script> 


 <script type="text/javascript">
  $(document).ready(function() {
  $("#coursesubjectlist_6")
   .select2({
    placeholder:'Please choose a subject'
  }).on("change",function(){
      var coursesubjectid = $(this).children(":selected").attr("id");
      console.log(coursesubjectid);
      $.ajax({
      url:'/similarcourse/filterbycoursesubject',
      type:'POST',
      data:{
          coursesubjectid:coursesubjectid  //be careful there is no punctuation
        },
      success:function(response){
          $('#courselist_6').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist_6').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
          $('#courselist2_6').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist2_6').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
      }
    });
      $(this).data('options', $('#departmentlist2_6 option').clone());
      var id = $(this).val()
      var options = $(this).data('options').filter('[value=' + id + ']');
      $('#departmentlist_6').html(options);
      var options = $(this).data('options');
      $('#departmentlist_6').append(options);
      $('#coursesubjectlist_6').focus();
  })
  .on("select2:close",function(){
    $('#coursesubjectlist_6').focus();
  })
});
</script>  


 <script type="text/javascript">
  $(document).ready(function() {
  $("#departmentlist_6")
   .select2({
    placeholder:'Please choose a department'
  }).on("change",function() {//this is a way to add "change" event

    $(this).data('options', $('#coursesubjectlist2_6 option').clone());
    var id = $(this).val();
    var options = $(this).data('options').filter('[value=' + id + ']');
    $('#coursesubjectlist_6').empty().append($('<option>'))
    $('#coursesubjectlist_6').append(options);//if you don't want to show your first choice, you can't use .html(),just append
    var departmentid=$("#departmentlist_6").val();
    $.ajax({
      url:'/similarcourse/filterbydepartment',
      type:'POST',
      data:{
          departmentid:departmentid  //be careful there is no punctuation
        },
      success:function(response){
          $('#courselist_6').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist_6').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
          $('#courselist2_6').empty().append($('<option>'));
          $.each(response, function (i, option) {
          $('#courselist2_6').append($('<option>', { //when you use jquery, you need '#' before the id name
         value: option.id,
         id:option.departmentindex,
         subjectid:option.coursesubjectindex,
         text : option.courseName
          }));
          });
      }
    });
    // });
    // $(this).data('options', $('#courselist_62 option').clone());
    //  var id = $(this).val();
    //  var options = $(this).data('options').filter('[id=' + id + ']');
    // $('#courselist_6').append(options);
    $('#departmentlist_6').focus();
    })//you can not add ';' here!!!
    .on("select2:close",function(){
    $(this).data('options', $('#departmentlist2_6 option').clone());
    var options = $(this).data('options')
     $('#departmentlist_6').append(options);
     $('#departmentlist_6').focus();
    });
  });
</script>    





